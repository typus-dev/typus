// =============================================================================
// PRISMA SCHEMA - AUTO-GENERATED FROM DSL MODELS
// =============================================================================
// Generated: 2025-12-16T05:19:08.108Z
// Provider: mysql
// ⚠️  DO NOT EDIT THIS FILE MANUALLY!
// ⚠️  Models are generated from @typus-core/shared/dsl/models/
// =============================================================================

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider      = "prisma-client-js"
  output        = "../generated/client"
  binaryTargets = ["native", "debian-openssl-3.0.x", "debian-openssl-1.1.x"]
}


// =============================================================================
// DSL-GENERATED MODELS
// =============================================================================

// Module: auth
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: AUTH
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.086Z
// Models: AuthEmailVerification, AuthHistory, AuthPasswordReset, AuthRefreshToken, AuthRole, AuthUserRole, AuthUser, AuthVerificationCode
// =============================================================================
// Models in this schema:
// - AuthEmailVerification (table: email_verifications, fields: 6, relations: 0)
// - AuthHistory (table: history, fields: 17, relations: 1)
// - AuthPasswordReset (table: password_resets, fields: 6, relations: 0)
// - AuthRefreshToken (table: refresh_tokens, fields: 9, relations: 1)
// - AuthRole (table: roles, fields: 7, relations: 1)
// - AuthUserRole (table: user_roles, fields: 4, relations: 2)
// - AuthUser (table: users, fields: 37, relations: 3)
// - AuthVerificationCode (table: verification_codes, fields: 6, relations: 0)
//
model AuthEmailVerification {
 id String @id @default(uuid()) @unique @db.VarChar(36)
 token String @unique @db.VarChar(191)
 expiresAt DateTime @db.DateTime(3) @map("expires_at")
 userId Int @map("user_id")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([token], map: "idx_email_verifications_token")
 @@map("auth.email_verifications")
}

model AuthHistory {
 id Int @id @default(autoincrement()) @unique
 login String? @db.VarChar(255)
 email String? @db.VarChar(255)
 password String? @db.VarChar(255)
 deviceData Json? @map("device_data")
 ispData Json? @map("isp_data")
 result String? @db.VarChar(255)
 userId Int? @map("user_id")
 userName String? @db.VarChar(255) @map("user_name")
 googleId String? @db.VarChar(255) @map("google_id")
 avatar String? @db.VarChar(255)
 token String @db.VarChar(512)
 attemptTime DateTime? @db.DateTime(3) @map("attempt_time")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([userId], map: "idx_history_user_id")
 // Relations
 user AuthUser? @relation("loginHistory", fields: [userId], references: [id])
 @@map("auth.history")
}

model AuthPasswordReset {
 id String @id @default(dbgenerated("(UUID())")) @unique @db.VarChar(36)
 userId Int @map("user_id")
 token String @unique @db.VarChar(255)
 expiresAt DateTime @db.DateTime(3) @map("expires_at")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([token], map: "idx_password_resets_token")
 @@map("auth.password_resets")
}

model AuthRefreshToken {
 id String @id @unique @db.VarChar(36)
 userId Int @map("user_id")
 token String @db.VarChar(512)
 accessTokenJti String? @db.VarChar(255) @map("access_token_jti")
 expiresAt DateTime @db.DateTime(3) @map("expires_at")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([userId], map: "idx_refresh_tokens_user_id")
 // Relations
 user AuthUser @relation("refreshTokens", fields: [userId], references: [id])
 @@map("auth.refresh_tokens")
}

model AuthRole {
 id Int @id @default(autoincrement()) @unique
 name String @unique @db.VarChar(255)
 description String @db.VarChar(255)
 deleted Boolean? @default(false)
 abilityRules Json? @map("ability_rules")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([name], map: "idx_roles_name")
 // Relations
 userRoles AuthUserRole[] @relation("userRoles")
 @@map("auth.roles")
}

model AuthUserRole {
 userId Int @map("user_id")
 roleId Int @map("role_id")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([userId], map: "idx_user_roles_user_id")
 @@index([roleId], map: "idx_user_roles_role_id")
 // Relations
 user AuthUser? @relation("userRoles", fields: [userId], references: [id])
 role AuthRole? @relation("userRoles", fields: [roleId], references: [id])
 @@id([userId, roleId])
 @@map("auth.user_roles")
}

model AuthUser {
 id Int @id @default(autoincrement()) @unique
 isApproved Boolean? @default(false) @map("is_approved")
 isDeleted Boolean? @default(false) @map("is_deleted")
 userName String? @db.VarChar(255) @map("user_name")
 email String @unique @db.VarChar(255)
 password String @db.VarChar(255)
 phoneNumber String? @db.VarChar(255) @map("phone_number")
 avatarUrl String? @db.VarChar(2048) @map("avatar_url")
 notes String? @db.VarChar(255)
 otp String? @db.VarChar(255)
 role String? @db.VarChar(255)
 dateOfBirth DateTime? @db.DateTime(3) @map("date_of_birth")
 isAdmin Boolean? @default(false) @map("is_admin")
 verificationToken String? @db.VarChar(255) @map("verification_token")
 isEmailVerified Boolean? @default(false) @map("is_email_verified")
 lastName String? @db.VarChar(255) @map("last_name")
 middleName String? @db.VarChar(255) @map("middle_name")
 firstName String? @db.VarChar(255) @map("first_name")
 googleId String? @db.VarChar(255) @map("google_id")
 lastLoginAttempt DateTime? @db.DateTime(3) @map("last_login_attempt")
 lastLogin DateTime? @db.DateTime(3) @map("last_login")
 lastActivity DateTime? @db.DateTime(3) @map("last_activity")
 cardNumber String? @db.VarChar(255) @map("card_number")
 twoFactorSecret String? @db.VarChar(255) @map("two_factor_secret")
 isTwoFactorEnabled Boolean? @default(false) @map("is_two_factor_enabled")
 twoFactorMethod String? @default("email") @db.VarChar(255) @map("two_factor_method")
 twoFactorTempSecret String? @db.VarChar(255) @map("two_factor_temp_secret")
 twoFactorTempMethod String? @db.VarChar(255) @map("two_factor_temp_method")
 twoFactorTempExpiry DateTime? @db.DateTime(3) @map("two_factor_temp_expiry")
 emailNotifications Boolean? @default(true) @map("email_notifications")
 pushNotifications Boolean? @default(false) @map("push_notifications")
 telegramNotifications Boolean? @default(false) @map("telegram_notifications")
 telegramChatId String? @db.VarChar(255) @map("telegram_chat_id")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([email], map: "idx_users_email")
 // Relations
 userRoles AuthUserRole[] @relation("userRoles")
 loginHistory AuthHistory[] @relation("loginHistory")
 refreshTokens AuthRefreshToken[] @relation("refreshTokens")
 @@map("auth.users")
}

model AuthVerificationCode {
 id String @id @default(dbgenerated("(UUID())")) @unique @db.VarChar(36)
 email String @unique @db.VarChar(255)
 code String @db.VarChar(255)
 expiresAt DateTime @db.DateTime(3) @map("expires_at")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([email], map: "idx_verification_codes_email")
 @@map("auth.verification_codes")
}

// Module: cms
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: CMS
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.090Z
// Models: CmsCategory, CmsItemCategory, CmsItemMedia, CmsItemTag, CmsItemType, CmsItem, CmsMedia, CmsTag
// =============================================================================
// Models in this schema:
// - CmsCategory (table: categories, fields: 8, relations: 1)
// - CmsItemCategory (table: item_categories, fields: 6, relations: 2)
// - CmsItemMedia (table: item_media, fields: 8, relations: 2)
// - CmsItemTag (table: item_tags, fields: 6, relations: 2)
// - CmsItemType (table: item_types, fields: 11, relations: 0)
// - CmsItem (table: items, fields: 33, relations: 4)
// - CmsMedia (table: media, fields: 14, relations: 2)
// - CmsTag (table: tags, fields: 7, relations: 1)
//
model CmsCategory {
 id Int @id @default(autoincrement()) @unique
 name String @db.VarChar(255)
 slug String @unique @db.VarChar(255)
 parentId Int? @map("parent_id")
 layout String? @db.VarChar(255)
 description String? @db.VarChar(255)
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([slug], map: "idx_categories_slug")
 // Relations
 itemLinks CmsItemCategory[] @relation("itemLinks")
 @@map("cms.categories")
}

model CmsItemCategory {
 itemId Int @map("item_id")
 categoryId Int @map("category_id")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([itemId], map: "idx_item_categories_item_id")
 @@index([categoryId], map: "idx_item_categories_category_id")
 // Relations
 item CmsItem? @relation("categoryLinks", fields: [itemId], references: [id])
 category CmsCategory? @relation("itemLinks", fields: [categoryId], references: [id])
 @@id([itemId, categoryId])
 @@map("cms.item_categories")
}

model CmsItemMedia {
 itemId Int @map("item_id")
 mediaId Int @map("media_id")
 relationship String @db.VarChar(255)
 orderIndex Int? @map("order_index")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([itemId], map: "idx_item_media_item_id")
 @@index([mediaId], map: "idx_item_media_media_id")
 // Relations
 item CmsItem? @relation("mediaLinks", fields: [itemId], references: [id])
 media CmsMedia? @relation("itemLinks", fields: [mediaId], references: [id])
 @@id([itemId, mediaId])
 @@map("cms.item_media")
}

model CmsItemTag {
 itemId Int @map("item_id")
 tagId Int @map("tag_id")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([itemId], map: "idx_item_tags_item_id")
 @@index([tagId], map: "idx_item_tags_tag_id")
 // Relations
 item CmsItem? @relation("tagLinks", fields: [itemId], references: [id])
 tag CmsTag? @relation("itemLinks", fields: [tagId], references: [id])
 @@id([itemId, tagId])
 @@map("cms.item_tags")
}

model CmsItemType {
 id Int @id @default(autoincrement()) @unique
 name String @unique @db.VarChar(50)
 displayName String @db.VarChar(100) @map("display_name")
 description String? @db.VarChar(255)
 schema Json?
 icon String? @db.VarChar(50)
 isActive Boolean @default(true) @map("is_active")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([name], map: "idx_item_types_name")
 @@map("cms.item_types")
}

model CmsItem {
 id Int @id @default(autoincrement()) @unique
 title String @db.VarChar(255)
 slug String @db.VarChar(255)
 contentType String @default("document") @db.VarChar(50) @map("content_type")
 content String? @db.Text
 status String @default("draft") @db.VarChar(255)
 layout String? @db.VarChar(100)
 sitePath String @unique @db.VarChar(255) @map("site_path")
 metadata Json?
 metaTitle String? @db.VarChar(255) @map("meta_title")
 metaDescription String? @db.VarChar(255) @map("meta_description")
 metaKeywords String? @db.VarChar(255) @map("meta_keywords")
 canonicalUrl String? @db.VarChar(512) @map("canonical_url")
 robotsMeta String? @default("index,follow") @db.VarChar(255) @map("robots_meta")
 ogTitle String? @db.VarChar(95) @map("og_title")
 ogDescription String? @db.VarChar(200) @map("og_description")
 ogImageId Int? @map("og_image_id")
 schemaType String? @default("WebPage") @db.VarChar(255) @map("schema_type")
 structuredData Json? @map("structured_data")
 sitemapPriority Decimal? @default("0.5") @db.Decimal(10,2) @map("sitemap_priority")
 sitemapChangefreq String? @default("monthly") @db.VarChar(255) @map("sitemap_changefreq")
 includeInSitemap Boolean? @default(true) @map("include_in_sitemap")
 cacheEnabled Boolean? @default(true) @map("cache_enabled")
 cacheTtl Int? @default(3600) @map("cache_ttl")
 cacheInfo Json? @map("cache_info")
 publishedAt DateTime? @db.DateTime(3) @map("published_at")
 publishAt DateTime? @db.DateTime(3) @map("publish_at")
 scheduledBy Int? @map("scheduled_by")
 isPublic Boolean @default(false) @map("is_public")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([sitePath], map: "idx_items_site_path")
 @@index([ogImageId], map: "idx_items_og_image_id")
 // Relations
 categoryLinks CmsItemCategory[] @relation("categoryLinks")
 tagLinks CmsItemTag[] @relation("tagLinks")
 mediaLinks CmsItemMedia[] @relation("mediaLinks")
 ogImage CmsMedia? @relation("ogItems", fields: [ogImageId], references: [id])
 @@map("cms.items")
}

model CmsMedia {
 id Int @id @default(autoincrement()) @unique
 filename String @db.VarChar(255)
 originalFilename String @db.VarChar(255) @map("original_filename")
 mimeType String @db.VarChar(100) @map("mime_type")
 size Int
 path String @db.VarChar(512)
 altText String? @db.VarChar(255) @map("alt_text")
 title String? @db.VarChar(255)
 description String? @db.VarChar(255)
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 // Relations
 itemLinks CmsItemMedia[] @relation("itemLinks")
 ogItems CmsItem[] @relation("ogItems")
 @@map("cms.media")
}

model CmsTag {
 id Int @id @default(autoincrement()) @unique
 name String @unique @db.VarChar(50)
 slug String @unique @db.VarChar(50)
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([name], map: "idx_tags_name")
 @@index([slug], map: "idx_tags_slug")
 // Relations
 itemLinks CmsItemTag[] @relation("itemLinks")
 @@map("cms.tags")
}

// Module: dispatcher
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: DISPATCHER
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.091Z
// Models: DispatcherQueueTask, DispatcherTaskHistory, DispatcherTask
// =============================================================================
// Models in this schema:
// - DispatcherQueueTask (table: queue_tasks, fields: 13, relations: 0)
// - DispatcherTaskHistory (table: task_history, fields: 19, relations: 0)
// - DispatcherTask (table: tasks, fields: 20, relations: 2)
//
model DispatcherQueueTask {
 id Int @id @default(autoincrement()) @unique
 queue String @db.VarChar(100)
 type String @db.VarChar(50)
 name String @db.VarChar(200)
 data Json
 status String @default("pending") @db.VarChar(255)
 priority Int @default(0)
 attempts Int @default(0)
 maxAttempts Int @default(3) @map("max_attempts")
 error String? @db.VarChar(255)
 processedAt DateTime? @db.DateTime(3) @map("processed_at")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("dispatcher.queue_tasks")
}

model DispatcherTaskHistory {
 id Int @id @default(autoincrement()) @unique
 taskId Int? @map("task_id")
 parentId Int? @map("parent_id")
 taskName String? @db.VarChar(255) @map("task_name")
 taskType String? @db.VarChar(255) @map("task_type")
 queueName String? @db.VarChar(255) @map("queue_name")
 status String @db.VarChar(255)
 externalJobId String? @db.VarChar(255) @map("external_job_id")
 waitingSince DateTime? @db.DateTime(3) @map("waiting_since")
 waitingUntil DateTime? @db.DateTime(3) @map("waiting_until")
 startedAt DateTime @db.DateTime(3) @map("started_at")
 finishedAt DateTime? @db.DateTime(3) @map("finished_at")
 duration Int?
 error String? @db.VarChar(255)
 result Json?
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("dispatcher.task_history")
}

model DispatcherTask {
 id Int @id @default(autoincrement()) @unique
 name String @db.VarChar(100)
 type String @db.VarChar(50)
 data Json?
 periodSec Int? @map("period_sec")
 parentId Int? @map("parent_id")
 isActive Boolean @default(true) @map("is_active")
 lastRun DateTime? @db.DateTime(3) @map("last_run")
 lastStatus String? @db.VarChar(255) @map("last_status")
 lastError String? @db.VarChar(255) @map("last_error")
 maxRuns Int? @map("max_runs")
 runCount Int? @default(0) @map("run_count")
 nextRun DateTime? @db.DateTime(3) @map("next_run")
 scheduleType String? @db.VarChar(255) @map("schedule_type")
 cronExpr String? @db.VarChar(255) @map("cron_expr")
 timeout Int?
 retryCount Int? @default(0) @map("retry_count")
 retryDelay Int? @default(300) @map("retry_delay")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([parentId], map: "idx_tasks_parent_id")
 // Relations
 parent DispatcherTask? @relation("children", fields: [parentId], references: [id])
 children DispatcherTask[] @relation("children")
 @@map("dispatcher.tasks")
}

// Module: notifications
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: NOTIFICATIONS
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.092Z
// Models: NotificationsHistory, NotificationsTelegramUser, NotificationsTemplate
// =============================================================================
// Models in this schema:
// - NotificationsHistory (table: history, fields: 11, relations: 0)
// - NotificationsTelegramUser (table: telegram_users, fields: 8, relations: 0)
// - NotificationsTemplate (table: templates, fields: 10, relations: 0)
//
model NotificationsHistory {
 id Int @id @default(autoincrement()) @unique
 userId Int @map("user_id")
 type String @db.VarChar(255)
 message String @db.Text
 status String @default("pending") @db.VarChar(255)
 metadata Json?
 templateId Int? @map("template_id")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("notifications.history")
}

model NotificationsTelegramUser {
 id Int @id @default(autoincrement()) @unique
 phone String @unique @db.VarChar(20)
 chatId String @db.VarChar(20) @map("chat_id")
 username String? @db.VarChar(100)
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([phone], map: "idx_telegram_users_phone")
 @@map("notifications.telegram_users")
}

model NotificationsTemplate {
 id Int @id @default(autoincrement()) @unique
 name String @unique @db.VarChar(255)
 subject String @db.VarChar(255)
 body String @db.Text
 notificationType String @db.VarChar(255) @map("notification_type")
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([name], map: "idx_templates_name")
 @@map("notifications.templates")
}

// Module: storage
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: STORAGE
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.093Z
// Models: StorageFile
// =============================================================================
// Models in this schema:
// - StorageFile (table: files, fields: 19, relations: 0)
//
model StorageFile {
 id String @id @unique @db.VarChar(36)
 originalName String @db.VarChar(255) @map("original_name")
 fileName String @db.VarChar(255) @map("file_name")
 mimeType String @db.VarChar(255) @map("mime_type")
 size Int
 storageProvider String @default("LOCAL") @db.VarChar(255) @map("storage_provider")
 storagePath String @db.VarChar(255) @map("storage_path")
 publicUrl String? @db.VarChar(2048) @map("public_url")
 visibility String @default("PRIVATE") @db.VarChar(255)
 userId Int @map("user_id")
 moduleContext String? @db.VarChar(255) @map("module_context")
 contextId String? @db.VarChar(255) @map("context_id")
 tags Json?
 description String? @db.VarChar(500)
 status String @default("ACTIVE") @db.VarChar(255)
 expiresAt DateTime? @db.DateTime(3) @map("expires_at")
 deletedAt DateTime? @db.DateTime(3) @map("deleted_at")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("storage.files")
}

// Module: system
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: SYSTEM
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.095Z
// Models: ConfigPublic, ServerContainer, ServerProject, SystemCache, SystemConfigAudit, SystemConfig, SystemDynamicRoute, SystemError, SystemLogStat, SystemLog, SystemSessionStorage
// =============================================================================
// Models in this schema:
// - ConfigPublic (table: config_public, fields: 10, relations: 0)
// - ServerContainer (table: containers, fields: 9, relations: 0)
// - ServerProject (table: projects, fields: 9, relations: 0)
// - SystemCache (table: cache, fields: 7, relations: 0)
// - SystemConfigAudit (table: config_audit_log, fields: 10, relations: 0)
// - SystemConfig (table: config, fields: 12, relations: 0)
// - SystemDynamicRoute (table: dynamic_routes, fields: 12, relations: 0)
// - SystemError (table: errors, fields: 10, relations: 0)
// - SystemLogStat (table: log_stats, fields: 11, relations: 0)
// - SystemLog (table: logs, fields: 18, relations: 0)
// - SystemSessionStorage (table: session_storage, fields: 6, relations: 0)
//
model ConfigPublic {
 id Int @id @default(autoincrement()) @unique
 key String @unique @db.VarChar(255)
 value String @db.Text
 category String? @db.VarChar(100)
 dataType String? @default("string") @db.VarChar(20) @map("data_type")
 description String? @db.Text
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([key], map: "idx_config_public_key")
 @@map("system.config_public")
}

model ServerContainer {
 id Int @id @default(autoincrement()) @unique
 name String @db.VarChar(255)
 projectId Int @map("project_id")
 status String @default("stopped") @db.VarChar(255)
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("system.containers")
}

model ServerProject {
 id Int @id @default(autoincrement()) @unique
 name String @db.VarChar(255)
 description String? @db.Text
 status String @default("active") @db.VarChar(255)
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("system.projects")
}

model SystemCache {
 id Int @id @default(autoincrement()) @unique
 key String @unique @db.VarChar(255)
 value String @db.Text
 namespace String? @db.VarChar(100)
 expiresAt DateTime? @db.DateTime(3) @map("expires_at")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([key], map: "idx_cache_key")
 @@map("system.cache")
}

model SystemConfigAudit {
 id Int @id @default(autoincrement()) @unique
 configKey String @db.VarChar(255) @map("config_key")
 oldValue String? @db.Text @map("old_value")
 newValue String? @db.Text @map("new_value")
 changedBy Int? @map("changed_by")
 changeSource String @db.VarChar(50) @map("change_source")
 ipAddress String? @db.VarChar(45) @map("ip_address")
 userAgent String? @db.Text @map("user_agent")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("system.config_audit_log")
}

model SystemConfig {
 id Int @id @default(autoincrement()) @unique
 key String @unique @db.VarChar(255)
 value String @db.Text
 category String? @db.VarChar(100)
 dataType String? @default("string") @db.VarChar(20) @map("data_type")
 isEncrypted Boolean? @default(false) @map("is_encrypted")
 requiresRestart Boolean? @default(false) @map("requires_restart")
 description String? @db.Text
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([key], map: "idx_config_key")
 @@map("system.config")
}

model SystemDynamicRoute {
 id String @id @default(dbgenerated("(UUID())")) @unique @db.VarChar(36)
 path String @db.VarChar(255)
 name String @db.VarChar(255)
 component String? @db.VarChar(255)
 parentId String? @db.VarChar(36) @map("parent_id")
 orderIndex Int @default(0) @map("order_index")
 meta Json?
 isActive Boolean @default(true) @map("is_active")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("system.dynamic_routes")
}

model SystemError {
 id Int @id @default(autoincrement()) @unique
 logId Int @map("log_id")
 errorType String @db.VarChar(100) @map("error_type")
 errorMessage String @db.Text @map("error_message")
 stackTrace String? @db.Text @map("stack_trace")
 additionalData Json? @map("additional_data")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("system.errors")
}

model SystemLogStat {
 id Int @id @default(autoincrement()) @unique
 date DateTime @db.DateTime(3)
 hour Int
 source String @db.VarChar(50)
 module String @db.VarChar(50)
 level String @db.VarChar(10)
 count Int @default(0)
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("system.log_stats")
}

model SystemLog {
 id Int @id @default(autoincrement()) @unique
 timestamp DateTime @db.DateTime(3)
 level String @db.VarChar(10)
 source String @db.VarChar(50)
 component String @db.VarChar(100)
 module String @db.VarChar(50)
 message String @db.Text
 metadata Json?
 contextId String? @db.VarChar(36) @map("context_id")
 userId String? @db.VarChar(36) @map("user_id")
 ipAddress String? @db.VarChar(45) @map("ip_address")
 requestPath String? @db.VarChar(255) @map("request_path")
 requestMethod String? @db.VarChar(10) @map("request_method")
 executionTime Int? @map("execution_time")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("system.logs")
}

model SystemSessionStorage {
 id Int @id @default(autoincrement()) @unique
 key String @unique @db.VarChar(255)
 value String @db.Text
 expiresAt DateTime @db.DateTime(3) @map("expires_at")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([key], map: "idx_session_storage_key")
 @@map("system.session_storage")
}

// Module: ai_agent
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: AI_AGENT
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.095Z
// Models: AiAgentConversation, AiAgentOperation, AiAgentSession, KnowledgeDocument
// =============================================================================
// Models in this schema:
// - AiAgentConversation (table: conversations, fields: 8, relations: 0)
// - AiAgentOperation (table: operations, fields: 10, relations: 0)
// - AiAgentSession (table: sessions, fields: 9, relations: 0)
// - KnowledgeDocument (table: knowledge_documents, fields: 14, relations: 0)
//
model AiAgentConversation {
 id Int @id @default(autoincrement())
 userId Int @map("user_id")
 title String? @db.VarChar(255)
 messages Json
 context String @default("admin") @db.VarChar(255)
 status String @default("active") @db.VarChar(255)
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("ai_agent.conversations")
}

model AiAgentOperation {
 id Int @id @default(autoincrement())
 operationId String @db.VarChar(255) @map("operation_id")
 parameters Json
 result Json
 userId Int @map("user_id")
 source String @db.VarChar(255)
 conversationId Int? @map("conversation_id")
 duration Int
 status String @db.VarChar(255)
 executedAt DateTime? @db.DateTime(3) @map("executed_at")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("ai_agent.operations")
}

model AiAgentSession {
 id Int @id @default(autoincrement())
 visitorId String @db.VarChar(255) @map("visitor_id")
 userId Int? @map("user_id")
 messages Json @default("[]")
memoryBuffer Json @default("{}") @map("memory_buffer")
agentState Json @default("{}") @map("agent_state")
 status String @default("active") @db.VarChar(255)
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("ai_agent.sessions")
}

model KnowledgeDocument {
 id Int @id @default(autoincrement())
 siteId String? @db.VarChar(100) @map("site_id")
 category String @db.VarChar(50)
 key String @db.VarChar(255)
 title String @db.VarChar(255)
 content String @db.Text
 structuredView String? @db.Text @map("structured_view")
 metadata Json?
 tags Json?
 source String? @default("auto-scan") @db.VarChar(50)
 scannedAt DateTime? @db.DateTime(3) @map("scanned_at")
 isActive Boolean? @default(true) @map("is_active")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("ai_agent.knowledge_documents")
}

// Module: compass
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: COMPASS
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.096Z
// Models: CompassItem
// =============================================================================
// Models in this schema:
// - CompassItem (table: items, fields: 27, relations: 2)
//
model CompassItem {
 id Int @id @default(autoincrement()) @unique
 userId Int @map("user_id")
 type String @db.VarChar(255)
 approach String? @db.VarChar(255)
 parentId Int? @map("parent_id")
 level Int @default(0)
 title String @db.VarChar(500)
 description String? @db.Text
 status String @default("pending") @db.VarChar(255)
 deadline DateTime? @db.DateTime(3)
 startDate DateTime? @db.DateTime(3) @map("start_date")
 completedAt DateTime? @db.DateTime(3) @map("completed_at")
 progress Int @default(0)
 metrics String?
 quarter String? @db.VarChar(255)
 phase String? @db.VarChar(255)
 position Int @default(0)
 tags String?
 priority String? @db.VarChar(255)
 workflowId Int? @map("workflow_id")
 executionType String? @db.VarChar(255) @map("execution_type")
 linkedPlanId Int? @map("linked_plan_id")
 partOfItemId Int? @map("part_of_item_id")
 aiAnalysis String? @map("ai_analysis")
 isCritical Boolean @default(false) @map("is_critical")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([parentId], map: "idx_items_parent_id")
 // Relations
 parent CompassItem? @relation("children", fields: [parentId], references: [id])
 children CompassItem[] @relation("children")
 @@map("compass.items")
}

// Module: crm
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: CRM
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.097Z
// Models: CrmChannel, CrmContact, CrmConversation, CrmMessage, CrmTouchpoint
// =============================================================================
// Models in this schema:
// - CrmChannel (table: channels, fields: 7, relations: 1)
// - CrmContact (table: contacts, fields: 9, relations: 3)
// - CrmConversation (table: conversations, fields: 8, relations: 2)
// - CrmMessage (table: messages, fields: 10, relations: 2)
// - CrmTouchpoint (table: touchpoints, fields: 7, relations: 1)
//
model CrmChannel {
 id Int @id @default(autoincrement())
 name String @db.VarChar(255)
 type String @db.VarChar(255)
 config Json?
 isActive Boolean? @default(true) @map("is_active")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 // Relations
 messages CrmMessage[] @relation("messages")
 @@map("crm.channels")
}

model CrmContact {
 id Int @id @default(autoincrement())
 name String @db.VarChar(255)
 email String? @db.VarChar(255)
 phone String? @db.VarChar(255)
 newsletterStatus String? @default("unsubscribed") @db.VarChar(255) @map("newsletter_status")
 source String? @db.VarChar(255)
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 // Relations
 conversations CrmConversation[] @relation("conversations")
 touchpoints CrmTouchpoint[] @relation("touchpoints")
 waitlistSignups WaitlistSignup[] @relation("waitlistSignups")
 @@map("crm.contacts")
}

model CrmConversation {
 id Int @id @default(autoincrement())
 contactId Int @map("contact_id")
 subject String @db.VarChar(255)
 status String? @default("open") @db.VarChar(255)
 priority String? @default("normal") @db.VarChar(255)
 assignedTo String? @db.VarChar(255) @map("assigned_to")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([contactId], map: "idx_conversations_contact_id")
 // Relations
 contact CrmContact? @relation("conversations", fields: [contactId], references: [id])
 messages CrmMessage[] @relation("messages")
 @@map("crm.conversations")
}

model CrmMessage {
 id Int @id @default(autoincrement())
 conversationId Int @map("conversation_id")
 channelId Int? @map("channel_id")
 type String @db.VarChar(255)
 direction String @db.VarChar(255)
 content String @db.Text
 metadata Json?
 status String? @default("sent") @db.VarChar(255)
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([conversationId], map: "idx_messages_conversation_id")
 @@index([channelId], map: "idx_messages_channel_id")
 // Relations
 conversation CrmConversation? @relation("messages", fields: [conversationId], references: [id])
 channel CrmChannel? @relation("messages", fields: [channelId], references: [id])
 @@map("crm.messages")
}

model CrmTouchpoint {
 id Int @id @default(autoincrement())
 contactId Int @map("contact_id")
 source String @db.VarChar(255)
 channel String? @db.VarChar(255)
 action String @db.VarChar(255)
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([contactId], map: "idx_touchpoints_contact_id")
 // Relations
 contact CrmContact? @relation("touchpoints", fields: [contactId], references: [id])
 @@map("crm.touchpoints")
}

// Module: image_lab
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: IMAGE_LAB
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.097Z
// Models: ImageUpload
// =============================================================================
// Models in this schema:
// - ImageUpload (table: uploads, fields: 11, relations: 0)
//
model ImageUpload {
 id Int @id @default(autoincrement()) @unique
 fileName String @db.VarChar(255) @map("file_name")
 originalName String @db.VarChar(255) @map("original_name")
 mimeType String @db.VarChar(100) @map("mime_type")
 size Int
 url String @db.VarChar(500)
 isActive Boolean @default(true) @map("is_active")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("image_lab.uploads")
}

// Module: newsletter
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: NEWSLETTER
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.098Z
// Models: NewsletterCampaign, NewsletterEmailLog, NewsletterTemplate, NewsletterSubscription
// =============================================================================
// Models in this schema:
// - NewsletterCampaign (table: campaigns, fields: 16, relations: 2)
// - NewsletterEmailLog (table: email_logs, fields: 12, relations: 2)
// - NewsletterTemplate (table: templates, fields: 12, relations: 1)
// - NewsletterSubscription (table: subscriptions, fields: 14, relations: 1)
//
model NewsletterCampaign {
 id Int @id @default(autoincrement())
 name String @db.VarChar(255)
 templateId Int @map("template_id")
 status String? @default("draft") @db.VarChar(255)
 recipientFilter Json? @map("recipient_filter")
 totalRecipients Int? @default(0) @map("total_recipients")
 sentCount Int? @default(0) @map("sent_count")
 failedCount Int? @default(0) @map("failed_count")
 openCount Int? @default(0) @map("open_count")
 clickCount Int? @default(0) @map("click_count")
 scheduledAt DateTime? @db.DateTime(3) @map("scheduled_at")
 startedAt DateTime? @db.DateTime(3) @map("started_at")
 completedAt DateTime? @db.DateTime(3) @map("completed_at")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([templateId], map: "idx_campaigns_template_id")
 // Relations
 template NewsletterTemplate? @relation("campaigns", fields: [templateId], references: [id])
 emailLogs NewsletterEmailLog[] @relation("emailLogs")
 @@map("newsletter.campaigns")
}

model NewsletterEmailLog {
 id Int @id @default(autoincrement())
 campaignId Int @map("campaign_id")
 subscriptionId Int @map("subscription_id")
 email String @db.VarChar(255)
 status String? @default("queued") @db.VarChar(255)
 sentAt DateTime? @db.DateTime(3) @map("sent_at")
 openedAt DateTime? @db.DateTime(3) @map("opened_at")
 clickedAt DateTime? @db.DateTime(3) @map("clicked_at")
 errorMessage String? @db.Text @map("error_message")
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([campaignId], map: "idx_email_logs_campaign_id")
 @@index([subscriptionId], map: "idx_email_logs_subscription_id")
 // Relations
 campaign NewsletterCampaign? @relation("emailLogs", fields: [campaignId], references: [id])
 subscription NewsletterSubscription? @relation("emailLogs", fields: [subscriptionId], references: [id])
 @@map("newsletter.email_logs")
}

model NewsletterTemplate {
 id Int @id @default(autoincrement())
 name String @db.VarChar(255)
 subject String @db.VarChar(255)
 previewText String? @db.VarChar(255) @map("preview_text")
 htmlContent String @db.Text @map("html_content")
 textContent String? @db.Text @map("text_content")
 status String? @default("draft") @db.VarChar(255)
 category String? @db.VarChar(255)
 variables Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 // Relations
 campaigns NewsletterCampaign[] @relation("campaigns")
 @@map("newsletter.templates")
}

model NewsletterSubscription {
 id Int @id @default(autoincrement())
 email String @unique @db.VarChar(255)
 name String? @db.VarChar(255)
 status String? @default("active") @db.VarChar(255)
 isActive Boolean? @default(true) @map("is_active")
 source String? @default("website") @db.VarChar(255)
 tags Json?
 unsubscribeToken String? @unique @db.VarChar(255) @map("unsubscribe_token")
 unsubscribedAt DateTime? @db.DateTime(3) @map("unsubscribed_at")
 ipAddress String? @db.VarChar(255) @map("ip_address")
 userAgent String? @db.VarChar(255) @map("user_agent")
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([email], map: "idx_subscriptions_email")
 @@index([unsubscribeToken], map: "idx_subscriptions_unsubscribe_token")
 // Relations
 emailLogs NewsletterEmailLog[] @relation("emailLogs")
 @@map("newsletter.subscriptions")
}

// Module: payments
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: PAYMENTS
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.099Z
// Models: PaymentFeatureCost, PaymentProduct, PaymentSubscription, PaymentTokenTransaction, PaymentPricingTierConfig, PaymentUsageLog, PaymentUsageQuota
// =============================================================================
// Models in this schema:
// - PaymentFeatureCost (table: feature_costs, fields: 14, relations: 0)
// - PaymentProduct (table: payment_products, fields: 18, relations: 0)
// - PaymentSubscription (table: subscriptions, fields: 12, relations: 1)
// - PaymentTokenTransaction (table: token_transactions, fields: 13, relations: 1)
// - PaymentPricingTierConfig (table: pricing_tier_configs, fields: 16, relations: 0)
// - PaymentUsageLog (table: usage_logs, fields: 8, relations: 0)
// - PaymentUsageQuota (table: usage_quotas, fields: 10, relations: 0)
//
model PaymentFeatureCost {
 id Int @id @default(autoincrement())
 featureId String @unique @db.VarChar(100) @map("feature_id")
 name String @db.VarChar(200)
 description String? @db.Text
 pluginId String @db.VarChar(100) @map("plugin_id")
 defaultCost Int @default(0) @map("default_cost")
 tierCosts Json? @map("tier_costs")
 category String? @db.VarChar(100)
 active Boolean @default(true)
 minimumTier String? @db.VarChar(255) @map("minimum_tier")
 trackUsage Boolean @default(true) @map("track_usage")
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([featureId], map: "idx_feature_costs_feature_id")
 @@map("payments.feature_costs")
}

model PaymentProduct {
 id Int @id @default(autoincrement())
 productId String @unique @db.VarChar(100) @map("product_id")
 name String @db.VarChar(200)
 description String? @db.Text
 type String @default("token-pack") @db.VarChar(255)
 price Decimal @db.Decimal(10,2)
 tokenGrant Int? @map("token_grant")
 bonus Int? @default(0)
 popular Boolean @default(false)
 featured Boolean @default(false)
 stripePriceId String? @db.VarChar(255) @map("stripe_price_id")
 active Boolean @default(true)
 sortOrder Int @default(0) @map("sort_order")
 imageUrl String? @db.VarChar(500) @map("image_url")
 featureAccess Json? @map("feature_access")
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([productId], map: "idx_payment_products_product_id")
 @@map("payments.payment_products")
}

model PaymentSubscription {
 id Int @id @default(autoincrement())
 userId Int @unique @map("user_id")
 tier String @default("free") @db.VarChar(255)
 tokenBalance Int @default(0) @map("token_balance")
 status String @default("active") @db.VarChar(255)
 expiresAt DateTime? @db.DateTime(3) @map("expires_at")
 cancelledAt DateTime? @db.DateTime(3) @map("cancelled_at")
 stripeCustomerId String? @db.VarChar(255) @map("stripe_customer_id")
 stripeSubscriptionId String? @db.VarChar(255) @map("stripe_subscription_id")
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([userId], map: "idx_subscriptions_user_id")
 // Relations
 transactions PaymentTokenTransaction[] @relation("transactions")
 @@map("payments.subscriptions")
}

model PaymentTokenTransaction {
 id Int @id @default(autoincrement())
 userId Int @map("user_id")
 subscriptionId Int? @map("subscription_id")
 amount Int
 balanceAfter Int @map("balance_after")
 type String @db.VarChar(255)
 reason String @db.VarChar(255)
 referenceId String? @db.VarChar(255) @map("reference_id")
 idempotencyKey String? @unique @db.VarChar(255) @map("idempotency_key")
 stripePaymentIntentId String? @db.VarChar(255) @map("stripe_payment_intent_id")
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([idempotencyKey], map: "idx_token_transactions_idempotency_key")
 @@index([subscriptionId], map: "idx_token_transactions_subscription_id")
 // Relations
 subscription PaymentSubscription? @relation("transactions", fields: [subscriptionId], references: [id])
 @@map("payments.token_transactions")
}

model PaymentPricingTierConfig {
 id Int @id @default(autoincrement())
 tier String @unique @db.VarChar(50)
 name String @db.VarChar(100)
 description String? @db.Text
 price Decimal @default("0") @db.Decimal(10,2)
 interval String @default("month") @db.VarChar(255)
 tokenGrant Int @default(0) @map("token_grant")
 tokenRefill Int @default(0) @map("token_refill")
 rollover Boolean @default(false)
 features Json?
 stripePriceId String? @db.VarChar(255) @map("stripe_price_id")
 active Boolean @default(true)
 sortOrder Int @default(0) @map("sort_order")
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([tier], map: "idx_pricing_tier_configs_tier")
 @@map("payments.pricing_tier_configs")
}

model PaymentUsageLog {
 id Int @id @default(autoincrement())
 userId Int @map("user_id")
 resourceType String @db.VarChar(50) @map("resource_type")
 amount Int @default(1)
 endpoint String? @db.VarChar(255)
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("payments.usage_logs")
}

model PaymentUsageQuota {
 id Int @id @default(autoincrement())
 userId Int @map("user_id")
 resourceType String @db.VarChar(50) @map("resource_type")
 quotaLimit Int @default(100) @map("quota_limit")
 currentUsage Int @default(0) @map("current_usage")
 resetAt DateTime @db.DateTime(3) @map("reset_at")
 tier String @db.VarChar(50)
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("payments.usage_quotas")
}

// Module: photoshoot
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: PHOTOSHOOT
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.100Z
// Models: PhotoshootImage, PhotoshootSession
// =============================================================================
// Models in this schema:
// - PhotoshootImage (table: images, fields: 9, relations: 0)
// - PhotoshootSession (table: sessions, fields: 10, relations: 0)
//
model PhotoshootImage {
 id Int @id @default(autoincrement()) @unique
 sessionId Int @map("session_id")
 styleConfig Json @map("style_config")
 storageFileId String? @db.VarChar(255) @map("storage_file_id")
 taskHistoryId Int? @map("task_history_id")
 status String @default("pending")
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("photoshoot.images")
}

model PhotoshootSession {
 id Int @id @default(autoincrement()) @unique
 userId Int @map("user_id")
 packageConfig Json @map("package_config")
 uploadedPhotoIds Json @map("uploaded_photo_ids")
 status String @default("pending")
 totalImages Int @map("total_images")
 completedImages Int @default(0) @map("completed_images")
 taskIds Json @map("task_ids")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("photoshoot.sessions")
}

// Module: pm
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: PM
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.100Z
// Models: ProjectActivity, ProjectTask, Project
// =============================================================================
// Models in this schema:
// - ProjectActivity (table: activities, fields: 12, relations: 2)
// - ProjectTask (table: tasks, fields: 17, relations: 4)
// - Project (table: projects, fields: 15, relations: 2)
//
model ProjectActivity {
 id Int @id @default(autoincrement()) @unique
 projectId Int @map("project_id")
 taskId Int? @map("task_id")
 entityType String @db.VarChar(255) @map("entity_type")
 action String @db.VarChar(255)
 field String? @db.VarChar(255)
 oldValue String? @db.Text @map("old_value")
 newValue String? @db.Text @map("new_value")
 description String? @db.Text
 userId Int @map("user_id")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([projectId], map: "idx_activities_project_id")
 @@index([taskId], map: "idx_activities_task_id")
 // Relations
 project Project @relation("activities", fields: [projectId], references: [id])
 task ProjectTask? @relation("activities", fields: [taskId], references: [id])
 @@map("pm.activities")
}

model ProjectTask {
 id Int @id @default(autoincrement()) @unique
 projectId Int @map("project_id")
 parentTaskId Int? @map("parent_task_id")
 title String @db.VarChar(500)
 description String? @db.Text
 status String @default("todo") @db.VarChar(255)
 priority String @default("medium") @db.VarChar(255)
 assigneeId Int? @map("assignee_id")
 deadline DateTime? @db.DateTime(3)
 completedAt DateTime? @db.DateTime(3) @map("completed_at")
 estimatedHours Decimal? @db.Decimal(10,2) @map("estimated_hours")
 actualHours Decimal? @default("0") @db.Decimal(10,2) @map("actual_hours")
 position Int? @default(0)
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([projectId], map: "idx_tasks_project_id")
 @@index([parentTaskId], map: "idx_tasks_parent_task_id")
 // Relations
 project Project @relation("tasks", fields: [projectId], references: [id])
 parentTask ProjectTask? @relation("subtasks", fields: [parentTaskId], references: [id])
 subtasks ProjectTask[] @relation("subtasks")
 activities ProjectActivity[] @relation("activities")
 @@map("pm.tasks")
}

model Project {
 id Int @id @default(autoincrement()) @unique
 name String @db.VarChar(200)
 slug String @unique @db.VarChar(200)
 description String? @db.Text
 status String @default("active") @db.VarChar(255)
 priority String? @default("medium") @db.VarChar(255)
 startDate DateTime? @db.DateTime(3) @map("start_date")
 deadline DateTime? @db.DateTime(3)
 completedAt DateTime? @db.DateTime(3) @map("completed_at")
 color String? @default("#3b82f6") @db.VarChar(255)
 ownerId Int @map("owner_id")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([slug], map: "idx_projects_slug")
 // Relations
 tasks ProjectTask[] @relation("tasks")
 activities ProjectActivity[] @relation("activities")
 @@map("pm.projects")
}

// Module: social
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: SOCIAL
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.102Z
// Models: SocialAccount, SocialPlatform, SocialPostAnalytics, SocialPostMedia, SocialPostTemplate, SocialPost
// =============================================================================
// Models in this schema:
// - SocialAccount (table: accounts, fields: 14, relations: 0)
// - SocialPlatform (table: platforms, fields: 10, relations: 0)
// - SocialPostAnalytics (table: post_analytics, fields: 12, relations: 0)
// - SocialPostMedia (table: post_media, fields: 5, relations: 0)
// - SocialPostTemplate (table: post_templates, fields: 10, relations: 0)
// - SocialPost (table: posts, fields: 19, relations: 0)
//
model SocialAccount {
 id Int @id @default(autoincrement()) @unique
 platformId String @db.VarChar(50) @map("platform_id")
 userId Int @map("user_id")
 accountName String @db.VarChar(255) @map("account_name")
 accountHandle String @db.VarChar(255) @map("account_handle")
 accountId String @db.VarChar(255) @map("account_id")
 accessToken String @db.VarChar(255) @map("access_token")
 refreshToken String? @db.VarChar(255) @map("refresh_token")
 tokenExpiresAt DateTime? @db.DateTime(3) @map("token_expires_at")
 isActive Boolean @default(true) @map("is_active")
 lastSync DateTime? @db.DateTime(3) @map("last_sync")
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("social.accounts")
}

model SocialPlatform {
 id String @id @unique @db.VarChar(36)
 name String @db.VarChar(100)
 displayName String @db.VarChar(100) @map("display_name")
 icon String? @db.VarChar(100)
 maxTextLength Int? @default(280) @map("max_text_length")
 supportedMediaTypes Json? @map("supported_media_types")
 features Json?
 isActive Boolean @default(true) @map("is_active")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("social.platforms")
}

model SocialPostAnalytics {
 id Int @id @default(autoincrement()) @unique
 postId Int @unique @map("post_id")
 platformId String @db.VarChar(50) @map("platform_id")
 likes Int? @default(0)
 shares Int? @default(0)
 comments Int? @default(0)
 views Int? @default(0)
 clicks Int? @default(0)
 metadata Json?
 lastUpdated DateTime? @db.DateTime(3) @map("last_updated")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([postId], map: "idx_post_analytics_post_id")
 @@map("social.post_analytics")
}

model SocialPostMedia {
 postId Int @map("post_id")
 mediaId Int @map("media_id")
 orderIndex Int? @default(0) @map("order_index")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@id([postId, mediaId])
 @@map("social.post_media")
}

model SocialPostTemplate {
 id Int @id @default(autoincrement()) @unique
 name String @db.VarChar(255)
 description String? @db.VarChar(255)
 platformId String @db.VarChar(50) @map("platform_id")
 userId Int @map("user_id")
 content String @db.VarChar(255)
 hashtags Json?
 isActive Boolean @default(true) @map("is_active")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("social.post_templates")
}

model SocialPost {
 id Int @id @default(autoincrement()) @unique
 platformId String @db.VarChar(50) @map("platform_id")
 accountId Int @map("account_id")
 userId Int @map("user_id")
 content String @db.VarChar(255)
 mediaIds Json? @map("media_ids")
 hashtags Json?
 status String @default("draft") @db.VarChar(255)
 scheduledAt DateTime? @db.DateTime(3) @map("scheduled_at")
 publishedAt DateTime? @db.DateTime(3) @map("published_at")
 externalPostId String? @db.VarChar(255) @map("external_post_id")
 externalUrl String? @db.VarChar(255) @map("external_url")
 metadata Json?
 errorMessage String? @db.VarChar(255) @map("error_message")
 retryCount Int? @default(0) @map("retry_count")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("social.posts")
}

// Module: test_instant
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: TEST_INSTANT
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.102Z
// Models: TestItem
// =============================================================================
// Models in this schema:
// - TestItem (table: test_items, fields: 7, relations: 0)
//
model TestItem {
 id Int @id @default(autoincrement()) @unique
 title String @db.VarChar(255)
 description String? @db.Text
 count Int? @default(0)
 isActive Boolean @default(true) @map("is_active")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("test_instant.test_items")
}

// Module: waitlist
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: WAITLIST
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.102Z
// Models: WaitlistReferral, WaitlistSignup
// =============================================================================
// Models in this schema:
// - WaitlistReferral (table: referrals, fields: 10, relations: 0)
// - WaitlistSignup (table: signups, fields: 20, relations: 1)
//
model WaitlistReferral {
 id Int @id @default(autoincrement())
 referrerId Int @map("referrer_id")
 referredEmail String @db.VarChar(255) @map("referred_email")
 status String @default("clicked") @db.VarChar(255)
 clickedAt DateTime @db.DateTime(3) @map("clicked_at")
 signedUpAt DateTime? @db.DateTime(3) @map("signed_up_at")
 verifiedAt DateTime? @db.DateTime(3) @map("verified_at")
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("waitlist.referrals")
}

model WaitlistSignup {
 id Int @id @default(autoincrement()) @unique
 email String @unique @db.VarChar(255)
 name String? @db.VarChar(255)
 status String @default("pending") @db.VarChar(255)
 position Int
 referralCode String @unique @db.VarChar(255) @map("referral_code")
 referredById Int? @map("referred_by_id")
 referralCount Int @default(0) @map("referral_count")
 positionBoost Int @default(0) @map("position_boost")
 verificationToken String? @unique @db.VarChar(255) @map("verification_token")
 verificationTokenExpiry DateTime? @db.DateTime(3) @map("verification_token_expiry")
 newsletterConsent Boolean @default(false) @map("newsletter_consent")
 metadata Json?
 verifiedAt DateTime? @db.DateTime(3) @map("verified_at")
 invitedAt DateTime? @db.DateTime(3) @map("invited_at")
 unsubscribedAt DateTime? @db.DateTime(3) @map("unsubscribed_at")
 userId Int? @map("user_id")
 contactId Int? @map("contact_id")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([email], map: "idx_signups_email")
 @@index([referralCode], map: "idx_signups_referral_code")
 @@index([verificationToken], map: "idx_signups_verification_token")
 @@index([contactId], map: "idx_signups_contact_id")
 // Relations
 contact CrmContact? @relation("waitlistSignups", fields: [contactId], references: [id])
 @@map("waitlist.signups")
}

// Module: web_analytics
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: WEB_ANALYTICS
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.103Z
// Models: WebAnalyticsPageView, WebAnalyticsReferrer, WebAnalyticsVisit
// =============================================================================
// Models in this schema:
// - WebAnalyticsPageView (table: page_views, fields: 20, relations: 0)
// - WebAnalyticsReferrer (table: referrers, fields: 15, relations: 0)
// - WebAnalyticsVisit (table: visits, fields: 28, relations: 0)
//
model WebAnalyticsPageView {
 id String @id @unique @db.VarChar(36)
 visitId String @db.VarChar(36) @map("visit_id")
 sessionId String @db.VarChar(64) @map("session_id")
 userId Int? @map("user_id")
 source String @db.VarChar(10)
 path String @db.VarChar(500)
 queryParams Json? @map("query_params")
 referrerUrl String? @db.VarChar(2000) @map("referrer_url")
 referrerPath String? @db.VarChar(500) @map("referrer_path")
 viewedAt DateTime @db.DateTime(3) @map("viewed_at")
 userAgent String @db.VarChar(500) @map("user_agent")
 ipAddressHash String @db.VarChar(64) @map("ip_address_hash")
 httpStatus Int? @map("http_status")
 requestTimeMs Int? @map("request_time_ms")
 screenResolution String? @db.VarChar(20) @map("screen_resolution")
 pageTitle String? @db.VarChar(500) @map("page_title")
 timeOnPageSeconds Int? @map("time_on_page_seconds")
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("web_analytics.page_views")
}

model WebAnalyticsReferrer {
 id Int @id @default(autoincrement()) @unique
 referrerUrl String @db.VarChar(2000) @map("referrer_url")
 referrerDomain String @db.VarChar(255) @map("referrer_domain")
 channel String @db.VarChar(50)
 visits Int @default(0)
 uniqueVisitors Int @default(0) @map("unique_visitors")
 pageViews Int @default(0) @map("page_views")
 avgSessionDuration Int @default(0) @map("avg_session_duration")
 bounceRate Decimal @default("0") @db.Decimal(10,2) @map("bounce_rate")
 avgPagesPerVisit Decimal @default("0") @db.Decimal(10,2) @map("avg_pages_per_visit")
 firstSeenAt DateTime @db.DateTime(3) @map("first_seen_at")
 lastSeenAt DateTime @db.DateTime(3) @map("last_seen_at")
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@map("web_analytics.referrers")
}

model WebAnalyticsVisit {
 id String @id @unique @db.VarChar(36)
 sessionId String @unique @db.VarChar(64) @map("session_id")
 userId Int? @map("user_id")
 ipAddressHash String @db.VarChar(64) @map("ip_address_hash")
 userAgent String @db.VarChar(500) @map("user_agent")
 deviceType String @db.VarChar(20) @map("device_type")
 browserName String? @db.VarChar(50) @map("browser_name")
 browserVersion String? @db.VarChar(20) @map("browser_version")
 osName String? @db.VarChar(50) @map("os_name")
 osVersion String? @db.VarChar(20) @map("os_version")
 firstVisitAt DateTime @db.DateTime(3) @map("first_visit_at")
 lastActivityAt DateTime @db.DateTime(3) @map("last_activity_at")
 durationSeconds Int @default(0) @map("duration_seconds")
 entryPage String @db.VarChar(500) @map("entry_page")
 exitPage String? @db.VarChar(500) @map("exit_page")
 pageViewsCount Int @default(0) @map("page_views_count")
 referrerUrl String? @db.VarChar(2000) @map("referrer_url")
 referrerDomain String? @db.VarChar(255) @map("referrer_domain")
 channel String? @db.VarChar(50)
 utmSource String? @db.VarChar(255) @map("utm_source")
 utmMedium String? @db.VarChar(255) @map("utm_medium")
 utmCampaign String? @db.VarChar(255) @map("utm_campaign")
 utmTerm String? @db.VarChar(255) @map("utm_term")
 utmContent String? @db.VarChar(255) @map("utm_content")
 isBounce Boolean @default(false) @map("is_bounce")
 metadata Json?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([sessionId], map: "idx_visits_session_id")
 @@map("web_analytics.visits")
}

// Module: workflow
// =============================================================================
// GENERATED PRISMA SCHEMA FOR MODULE: WORKFLOW
// =============================================================================
// This file is auto-generated from DSL models with generatePrisma: true
// Generated at: 2025-12-16T05:19:08.107Z
// Models: BlockExecution, WorkflowDefinition, WorkflowExecution
// =============================================================================
// Models in this schema:
// - BlockExecution (table: block_executions, fields: 12, relations: 1)
// - WorkflowDefinition (table: definitions, fields: 17, relations: 1)
// - WorkflowExecution (table: executions, fields: 21, relations: 2)
//
model BlockExecution {
 id Int @id @default(autoincrement())
 executionId Int @map("execution_id")
 blockId String @db.VarChar(100) @map("block_id")
 input Json?
 output Json?
 status String @default("pending") @db.VarChar(255)
 error String? @db.Text
 startedAt DateTime? @db.DateTime(3) @map("started_at")
 completedAt DateTime? @db.DateTime(3) @map("completed_at")
 duration Int?
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([executionId], map: "idx_block_executions_execution_id")
 // Relations
 execution WorkflowExecution? @relation("blockExecutions", fields: [executionId], references: [id])
 @@map("workflow.block_executions")
}

model WorkflowDefinition {
 id Int @id @default(autoincrement())
 name String @db.VarChar(255)
 description String? @db.Text
 userPrompt String? @db.Text @map("user_prompt")
 masterPrompt String? @db.Text @map("master_prompt")
 version Int @default(1)
 blocks Json
 connections Json
 status String @default("draft") @db.VarChar(255)
 triggerType String @default("manual") @db.VarChar(255) @map("trigger_type")
 triggerConfig Json? @map("trigger_config")
 tags Json?
 isActive Boolean @default(true) @map("is_active")
 publishedAt DateTime? @db.DateTime(3) @map("published_at")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 // Relations
 executions WorkflowExecution[] @relation("executions")
 @@map("workflow.definitions")
}

model WorkflowExecution {
 id Int @id @default(autoincrement())
 workflowId Int @map("workflow_id")
 status String @default("pending") @db.VarChar(255)
 currentBlocks Json? @map("current_blocks")
 completedBlocks Json? @map("completed_blocks")
 failedBlocks Json? @map("failed_blocks")
 progress Int @default(0)
 blockResults Json? @map("block_results")
 logs Json?
 context Json?
 startedAt DateTime? @db.DateTime(3) @map("started_at")
 completedAt DateTime? @db.DateTime(3) @map("completed_at")
 pausedAt DateTime? @db.DateTime(3) @map("paused_at")
 error String? @db.Text
 errorDetails Json? @map("error_details")
 triggeredBy Int? @map("triggered_by")
 triggerSource String @default("manual") @db.VarChar(255) @map("trigger_source")
 retryCount Int @default(0) @map("retry_count")
 parentExecutionId Int? @map("parent_execution_id")
 createdAt DateTime @db.DateTime(3) @default(now()) @map("created_at")
 updatedAt DateTime @db.DateTime(3) @updatedAt @map("updated_at")
 createdBy Int? @map("created_by")
 updatedBy Int? @map("updated_by")
 @@index([workflowId], map: "idx_executions_workflow_id")
 // Relations
 workflow WorkflowDefinition? @relation("executions", fields: [workflowId], references: [id])
 blockExecutions BlockExecution[] @relation("blockExecutions")
 @@map("workflow.executions")
}
